var dermoStickers = [{
    id: "-157726782_456239076",
    url: "https://pp.userapi.com/c621515/v621515552/3cfca/D5RMNm4i0KQ.jpg"
}, {
    id: "-157726782_456239077",
    url: "https://pp.userapi.com/c621515/v621515552/3cfd1/CuAuS3j99_E.jpg"
}, {
    id: "-157726782_456239078",
    url: "https://pp.userapi.com/c621515/v621515552/3cfd8/3eOQUPSGmqU.jpg"
}, {
    id: "-157726782_456239079",
    url: "https://pp.userapi.com/c621515/v621515552/3cfdf/zcfH8seaNzw.jpg"
}, {
    id: "-157726782_456239080",
    url: "https://pp.userapi.com/c621515/v621515552/3cfe6/4WvSnXILQk0.jpg"
}, {
    id: "-157726782_456239081",
    url: "https://pp.userapi.com/c621515/v621515552/3cfed/NkS_vkxkHUU.jpg"
}, {
    id: "-157726782_456239082",
    url: "https://pp.userapi.com/c621515/v621515552/3cff4/6THg6w6HyhE.jpg"
}, {
    id: "-157726782_456239083",
    url: "https://pp.userapi.com/c621515/v621515552/3cffb/HbGcpoqLJG4.jpg"
}, {
    id: "-157726782_456239084",
    url: "https://pp.userapi.com/c621515/v621515552/3d002/zTCNHx3S3Kw.jpg"
}, {
    id: "-157726782_456239085",
    url: "https://pp.userapi.com/c621515/v621515552/3d009/Rc4aLlh2FfQ.jpg"
}, {
    id: "-157726782_456239086",
    url: "https://pp.userapi.com/c621515/v621515552/3d010/Ftfj9yEZlxI.jpg"
}, {
    id: "-157726782_456239087",
    url: "https://pp.userapi.com/c621515/v621515552/3d017/XsMkTSiTnU4.jpg"
}, {
    id: "-157726782_456239088",
    url: "https://pp.userapi.com/c621515/v621515552/3d01e/bBwTx7SNy6w.jpg"
}, {
    id: "-157726782_456239089",
    url: "https://pp.userapi.com/c621515/v621515552/3d025/NUF5_hpJ_Zk.jpg"
}, {
    id: "-157726782_456239090",
    url: "https://pp.userapi.com/c621515/v621515552/3d02c/nS5o7D9VzSg.jpg"
}, {
    id: "-157726782_456239091",
    url: "https://pp.userapi.com/c621515/v621515552/3d033/mXLHT8OeUZs.jpg"
}, {
    id: "-157726782_456239092",
    url: "https://pp.userapi.com/c621515/v621515552/3d03a/HdrZ2Lmh2ac.jpg"
}, {
    id: "-157726782_456239093",
    url: "https://pp.userapi.com/c621515/v621515552/3d041/eGIIfhdHwVs.jpg"
}, {
    id: "-157726782_456239094",
    url: "https://pp.userapi.com/c621515/v621515552/3d048/JN2Y1zIQ454.jpg"
}, {
    id: "-157726782_456239095",
    url: "https://pp.userapi.com/c621515/v621515552/3d04f/vVL4Gu1HkA0.jpg"
}, {
    id: "-157726782_456239096",
    url: "https://pp.userapi.com/c621515/v621515552/3d056/HyOWMOhnw_w.jpg"
}, {
    id: "-157726782_456239097",
    url: "https://pp.userapi.com/c621515/v621515552/3d05d/HiJpibE3kpI.jpg"
}, {
    id: "-157726782_456239098",
    url: "https://pp.userapi.com/c621515/v621515552/3d064/E-jq8MSFa-U.jpg"
}, {
    id: "-157726782_456239099",
    url: "https://pp.userapi.com/c621515/v621515552/3d06b/WiKSh6EBxas.jpg"
}, {
    id: "-157726782_456239100",
    url: "https://pp.userapi.com/c621515/v621515552/3d072/4hh85VyJzNE.jpg"
}, {
    id: "-157726782_456239101",
    url: "https://pp.userapi.com/c621515/v621515552/3d079/SF8hWexAnuw.jpg"
}, {
    id: "-157726782_456239102",
    url: "https://pp.userapi.com/c621515/v621515552/3d080/dMp5N24GqmY.jpg"
}, {
    id: "-157726782_456239103",
    url: "https://pp.userapi.com/c621515/v621515552/3d087/hvzheuQk43M.jpg"
}, {
    id: "-157726782_456239104",
    url: "https://pp.userapi.com/c621515/v621515552/3d08e/nEK1v_kzc1Q.jpg"
}, {
    id: "-157726782_456239105",
    url: "https://pp.userapi.com/c621515/v621515552/3d095/MbCQXM95RsA.jpg"
}, {
    id: "-157726782_456239106",
    url: "https://pp.userapi.com/c621515/v621515552/3d09c/D0UH3H63-Zw.jpg"
}, {
    id: "-157726782_456239107",
    url: "https://pp.userapi.com/c621515/v621515552/3d0a3/KFDxNIayuk8.jpg"
}, {
    id: "-157726782_456239108",
    url: "https://pp.userapi.com/c621515/v621515552/3d0aa/Jbg2LeehWlY.jpg"
}, {
    id: "-157726782_456239109",
    url: "https://pp.userapi.com/c621515/v621515552/3d0b1/0nhAMzud1sM.jpg"
}, {
    id: "-157726782_456239110",
    url: "https://pp.userapi.com/c621515/v621515552/3d0b8/-mMbq-KP1mw.jpg"
}, {
    id: "-157726782_456239111",
    url: "https://pp.userapi.com/c621515/v621515552/3d0bf/rO1Eg7SydSM.jpg"
}, {
    id: "-157726782_456239112",
    url: "https://pp.userapi.com/c621515/v621515552/3d0c6/ZQSd5HEJVBY.jpg"
}, {
    id: "-157726782_456239113",
    url: "https://pp.userapi.com/c621515/v621515552/3d0cd/j0RH1Vkge5s.jpg"
}, {
    id: "-157726782_456239114",
    url: "https://pp.userapi.com/c621515/v621515552/3d0d4/Cn2YTriGGSM.jpg"
}, {
    id: "-157726782_456239115",
    url: "https://pp.userapi.com/c621515/v621515552/3d0db/B0NlgyCuLVw.jpg"
}, {
    id: "-157726782_456239116",
    url: "https://pp.userapi.com/c621515/v621515552/3d0e2/KVVpLlHgPLg.jpg"
}, {
    id: "-157726782_456239117",
    url: "https://pp.userapi.com/c621515/v621515552/3d0e9/ZLjpHAkXWyA.jpg"
}, {
    id: "-157726782_456239118",
    url: "https://pp.userapi.com/c621515/v621515552/3d0f0/mN1jJ3YC9iE.jpg"
}, {
    id: "-157726782_456239119",
    url: "https://pp.userapi.com/c621515/v621515552/3d0f7/3NkV89lmY2A.jpg"
}, {
    id: "-157726782_456239120",
    url: "https://pp.userapi.com/c621515/v621515552/3d0fe/n5-99kYQb9M.jpg"
}, {
    id: "-157726782_456239121",
    url: "https://pp.userapi.com/c621515/v621515552/3d105/RpgoKMGDyhI.jpg"
}, {
    id: "-157726782_456239122",
    url: "https://pp.userapi.com/c621515/v621515552/3d10c/jKjiecXUFqs.jpg"
}, {
    id: "-157726782_456239123",
    url: "https://pp.userapi.com/c621515/v621515552/3d113/5XdCY9qZaXY.jpg"
}, {
    id: "-157726782_456239124",
    url: "https://pp.userapi.com/c621515/v621515552/3d11a/r4yTBf5brMg.jpg"
}, {
    id: "-157726782_456239125",
    url: "https://pp.userapi.com/c621515/v621515552/3d121/qXJwCLuGfCM.jpg"
}, {
    id: "-157726782_456239126",
    url: "https://pp.userapi.com/c621515/v621515552/3d128/z_O12nbhMys.jpg"
}, {
    id: "-157726782_456239127",
    url: "https://pp.userapi.com/c621515/v621515552/3d12f/LPJJ6024Yw0.jpg"
}, {
    id: "-157726782_456239128",
    url: "https://pp.userapi.com/c621515/v621515552/3d136/qLB0v4uVUxk.jpg"
}, {
    id: "-157726782_456239129",
    url: "https://pp.userapi.com/c621515/v621515552/3d13d/zWe8hPP_KD8.jpg"
}, {
    id: "-157726782_456239130",
    url: "https://pp.userapi.com/c621515/v621515552/3d144/eBE-IXpxWNo.jpg"
}, {
    id: "-157726782_456239131",
    url: "https://pp.userapi.com/c621515/v621515552/3d14b/n7GLdDdkEfk.jpg"
}, {
    id: "-157726782_456239132",
    url: "https://pp.userapi.com/c621515/v621515552/3d152/daCsvY_p9xk.jpg"
}, {
    id: "-157726782_456239133",
    url: "https://pp.userapi.com/c621515/v621515552/3d159/lqJqlSv3R5I.jpg"
}];

function waitHead() {
    if (document.head) return init();
    setTimeout(waitHead, 20)
}

function init() {
    var t, e;
    if ((t = document.createElement("script")).setAttribute("type", "text/javascript"), t.innerHTML = 'window.dermoUrl = "' + chrome['extension'].getURL("/") + '";', document.head.appendChild(t), window.top != window) return (t = document.createElement("script")).setAttribute("type", "text/javascript"), void document.head.appendChild(t);
    (e = document.createElement("link")).setAttribute("rel", "stylesheet"), e.setAttribute("href", chrome['extension'].getURL("css/dermo.css")), document.head.appendChild(e), (t = document.createElement("script")).setAttribute("type", "text/javascript"), t.setAttribute("src", chrome['extension'].getURL("core/dermoStart.js")), document.head.appendChild(t), (t = document.createElement("script")).setAttribute("type", "text/javascript"), t.setAttribute("onload", "dermoStart();"), t.setAttribute("src", "//vk.com/js/api/openapi.js?150"), t.onload = function() {
        setInterval(dermoUpgrade, 1e3)
    }, document.head.appendChild(t)
}

function dermoUpgrade() {
    ! function() {
        var t = document.getElementsByClassName("post"),
            e = [];
        for (var p in t) e.push(t[p]);
        document.getElementById("wl_post");
        for (var p in e) {
            var i = e[p];
            if (i.getAttribute && i.setAttribute) {
                var r = i.getAttribute("dermo-checked");
                if (!r) {
                    i.setAttribute("dermo-checked", !0);
                }
            }
        }
    }(),
        function() {
            var t = document.getElementsByClassName("emoji_tt_wrap");
            for (var e in t) {
                var p = t[e];
                if (p && p.getAttribute) {
                    var i = p.getAttribute("dermo-checked");
                    if (!i) {
                        p.setAttribute("dermo-checked", !0);
                        var r = p.querySelector(".emoji_tabs"),
                            s = r.querySelector(".emoji_tab_0"),
                            c = p.querySelector(".ui_scroll_content"),
                            d = (p.querySelector(".emoji_scroll_stickers"), document.createElement("div"));
                        d.setAttribute("class", "emoji_scroll emoji_scroll_dermo"), d.style.display = "none", c.appendChild(d);
                        for (var o in dermoStickers) {
                            var u = new dermoSticker(dermoStickers[o].id, dermoStickers[o].url);
                            d.appendChild(u)
                        }
                        var a = document.createElement("a");
                        a.innerHTML = s.innerHTML, a.setAttribute("class", s.getAttribute("class") + " emoji_dermo"), a.onclick = function() {
                            var t = c.getElementsByClassName("emoji_scroll");
                            for (var e in t) {
                                var p = t[e];
                                p && p.style && (p.style.display = "none")
                            }
                            d.style.display = "block"
                        }, r.insertBefore(a, s)
                    }
                }
            }
        }()
}

function dermoSticker(t, e) {
    var p = document.createElement("a");
    p.setAttribute("id", "emoji_sticker_item0_999_" + t), p.setAttribute("data-pack-id", "dermo"), p.setAttribute("data-src", e), p.setAttribute("class", "emoji_sticker_item __loaded"), p.setAttribute("onclick", 'return clickDermoSticker("' + t + '","' + e + '", event)');
    var i = document.createElement("img");
    return i.setAttribute("class", "emoji_sticker_image"), i.setAttribute("src", e), i.setAttribute("data-src", e), p.appendChild(i), p
}

waitHead();